@* @page "/homepage" *@
@page "/"
@inject NavigationManager NavigationManager
@inject ILocalStorageService LocalStorage


<div class="main">
    <div class="homepage-background">

        <h1>Words</h1>
        <hr />

        <button type="button" class="btn btn-primary" @onclick="ToLoginPage">Login</button>
        <button type="button" class="btn btn-primary" @onclick="ToRegisterPage">Signup</button>
    </div>
</div>
@code {
    [CascadingParameter]
    public Task<AuthenticationState> AuthState { get; set; }

    void ToLoginPage()
    {
        NavigationManager.NavigateTo("loginpage");
    }

    void ToRegisterPage()
    {
        NavigationManager.NavigateTo("registerpage");
    }

    protected override async Task OnInitializedAsync()
    {
        // Comment out later
        // await LocalStorage.RemoveItemAsync("token");

        var user = (await AuthState).User;
        if (user.Identity is not null)
        {
            if (user.Identity.IsAuthenticated)
            {
                NavigationManager.NavigateTo("/wordspage");
            }
        }

        await base.OnInitializedAsync();
    }

}
